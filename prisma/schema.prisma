generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  user_id     String    @id @default(uuid())
  user_name   String    @unique @db.VarChar(20)
  public_name String    @db.VarChar()
  birth_date  DateTime? @db.Date
  password    String    @db.VarChar()

  phone_number String @db.VarChar()
  email        String @unique @db.VarChar()
  user_bio     String @db.Text

  Chat        Chat?   @relation(fields: [chatChat_id], references: [chat_id])
  chatChat_id String?

  created_at DateTime  @default(now())
  updated_at DateTime  @default(now())
  deleted_at DateTime?

  @@map("user")
}

enum ChatType {
  PRIVATE
  GROUP
}

model Chat {
  chat_id           String   @id @default(uuid())
  chat_participants User[]
  chat_type         ChatType @default(PRIVATE)

  created_at DateTime  @default(now())
  updated_at DateTime  @default(now())
  deleted_at DateTime?

  @@map("chat")
}
